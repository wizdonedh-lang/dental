.scene,
.a3d {
    display: grid;
}

.scene {
    overflow: visible;
    perspective: 150em;
    mask: linear-gradient(90deg,
            transparent 0%,
            rgba(255, 255, 255, 0.3) 5%,
            rgba(255, 255, 255, 0.7) 10%,
            rgb(255, 255, 255) 15%,
            rgb(255, 255, 255) 85%,
            rgba(255, 255, 255, 0.7) 90%,
            rgba(255, 255, 255, 0.3) 95%,
            transparent 100%);
    -webkit-mask: linear-gradient(90deg,
            transparent 0%,
            rgba(255, 255, 255, 0.3) 5%,
            rgba(255, 255, 255, 0.7) 10%,
            rgb(255, 255, 255) 15%,
            rgb(255, 255, 255) 85%,
            rgba(255, 255, 255, 0.7) 90%,
            rgba(255, 255, 255, 0.3) 95%,
            transparent 100%);
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    position: relative;
}

.a3d {
    place-self: center;
    transform-style: preserve-3d;
    /* Faster rotation: 20s for one full rotation */
    animation: ry 20s linear infinite;
    /* Force GPU acceleration for smooth animation */
    will-change: transform;
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
}

@keyframes ry {
    0% {
        transform: rotateY(0deg);
    }

    100% {
        transform: rotateY(360deg);
    }
}

.card {
    --w: 22em;
    --ba: calc(1turn / var(--n));

    grid-area: 1 / 1;
    width: var(--w);
    aspect-ratio: 7 / 10;
    object-fit: cover;
    border-radius: 1.25em;
    backface-visibility: hidden;

    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);

    transform:
        rotateY(calc(var(--i) * var(--ba))) translateZ(calc(-1 * (0.5 * var(--w) + 2em) / tan(0.5 * var(--ba))));

    /* GPU acceleration for each card */
    will-change: transform;
}

/* Respect accessibility */
@media (prefers-reduced-motion: reduce) {
    .a3d {
        animation-duration: 120s;
    }
}

/* Pause on hover for better UX */
.scene:hover .a3d {
    animation-play-state: paused;
}

@media (max-width: 768px) {
    .card {
        --w: 12em;
    }

    .scene {
        perspective: 60em;
        mask: linear-gradient(90deg,
                transparent,
                white 10% 90%,
                transparent);
        -webkit-mask: linear-gradient(90deg,
                transparent,
                white 10% 90%,
                transparent);
    }

    /* Slightly slower on mobile for performance */
    .a3d {
        animation-duration: 25s;
    }
}

.services-3d {
    padding: 4rem 0;
    background: #ffffff;
    text-align: center;
    overflow-x: clip;
    width: 100%;
    position: relative;
}